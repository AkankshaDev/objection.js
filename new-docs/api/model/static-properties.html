<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Static Properties | Objection.js</title>
    <meta name="description" content="An SQL friendly ORM for node.js">
    
    
    <link rel="preload" href="/objection.js/new-docs/assets/css/0.styles.78b46716.css" as="style"><link rel="preload" href="/objection.js/new-docs/assets/js/app.4e2e77f5.js" as="script"><link rel="preload" href="/objection.js/new-docs/assets/js/11.cf2c8918.js" as="script"><link rel="prefetch" href="/objection.js/new-docs/assets/js/1.7325bf53.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/10.73befdeb.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/12.af12f3e3.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/13.87f2f29e.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/14.97c5feaa.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/15.8833795f.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/16.496d8781.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/17.f57bca03.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/18.bee83847.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/19.56f50c47.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/2.d7717291.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/20.02bfcf0a.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/21.fdcf29d9.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/22.41a833be.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/23.1e1851be.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/24.789c23bb.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/25.6299694b.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/26.5b1e7055.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/27.b320d60a.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/28.fdd434eb.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/29.4f773924.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/3.796539dd.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/30.21eec2fb.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/31.3e7a4cc5.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/32.8c12a0a8.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/33.0bb043ca.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/34.e6dafc2d.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/35.3ba19247.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/36.d822ffa8.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/37.e6cd9387.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/38.5b7a48a5.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/39.9e903591.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/40.7df0496b.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/41.d494768c.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/42.c8708460.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/43.ada4255a.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/5.0ae1e31b.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/6.2bd497bc.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/7.87d1f15c.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/8.a99f1d90.js"><link rel="prefetch" href="/objection.js/new-docs/assets/js/9.10aa34da.js">
    <link rel="stylesheet" href="/objection.js/new-docs/assets/css/0.styles.78b46716.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/objection.js/new-docs/" class="home-link router-link-active"><!----> <span class="site-name">Objection.js</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/objection.js/new-docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">API Reference</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/new-docs/api/objection/" class="nav-link">Main Module</a></li><li class="dropdown-item"><!----> <a href="/objection.js/new-docs/api/query-builder/" class="nav-link">Query Builder</a></li><li class="dropdown-item"><!----> <a href="/objection.js/new-docs/api/model/" class="nav-link router-link-active">Model</a></li><li class="dropdown-item"><!----> <a href="/objection.js/new-docs/api/types/" class="nav-link">Types</a></li></ul></div></div><div class="nav-item"><a href="/objection.js/new-docs/recipes/" class="nav-link">Recipe Book</a></div> <a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/objection.js/new-docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">API Reference</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/objection.js/new-docs/api/objection/" class="nav-link">Main Module</a></li><li class="dropdown-item"><!----> <a href="/objection.js/new-docs/api/query-builder/" class="nav-link">Query Builder</a></li><li class="dropdown-item"><!----> <a href="/objection.js/new-docs/api/model/" class="nav-link router-link-active">Model</a></li><li class="dropdown-item"><!----> <a href="/objection.js/new-docs/api/types/" class="nav-link">Types</a></li></ul></div></div><div class="nav-item"><a href="/objection.js/new-docs/recipes/" class="nav-link">Recipe Book</a></div> <a href="https://github.com/vincit/objection.js" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Model API Reference</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/objection.js/new-docs/api/model/overview.html" class="sidebar-link">Overview</a></li><li><a href="/objection.js/new-docs/api/model/static-properties.html" class="active sidebar-link">Static Properties</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-tablename" class="sidebar-link">static tableName</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-relationmappings" class="sidebar-link">static relationMappings</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-idcolumn" class="sidebar-link">static idColumn</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-jsonschema" class="sidebar-link">static jsonSchema</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-virtualattributes" class="sidebar-link">static virtualAttributes</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-modifiers" class="sidebar-link">static modifiers</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-namedfilters" class="sidebar-link">static namedFilters</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-modelpaths" class="sidebar-link">static modelPaths</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-concurrency" class="sidebar-link">static concurrency</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-jsonattributes" class="sidebar-link">static jsonAttributes</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-cloneobjectattributes" class="sidebar-link">static cloneObjectAttributes</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-columnnamemappers" class="sidebar-link">static columnNameMappers</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-relatedfindquerymutates" class="sidebar-link">static relatedFindQueryMutates</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-relatedinsertquerymutates" class="sidebar-link">static relatedInsertQueryMutates</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-uidprop" class="sidebar-link">static uidProp</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-uidrefprop" class="sidebar-link">static uidRefProp</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-dbrefprop" class="sidebar-link">static dbRefProp</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-proprefregex" class="sidebar-link">static propRefRegex</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-pickjsonschemaproperties" class="sidebar-link">static pickJsonSchemaProperties</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-defaulteageralgorithm" class="sidebar-link">static defaultEagerAlgorithm</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-defaulteageroptions" class="sidebar-link">static defaultEagerOptions</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-uselimitinfirst" class="sidebar-link">static useLimitInFirst</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-querybuilder" class="sidebar-link">static QueryBuilder</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-belongstoonerelation" class="sidebar-link">static BelongsToOneRelation</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-hasonerelation" class="sidebar-link">static HasOneRelation</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-hasmanyrelation" class="sidebar-link">static HasManyRelation</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-manytomanyrelation" class="sidebar-link">static ManyToManyRelation</a></li><li class="sidebar-sub-header"><a href="/objection.js/new-docs/api/model/static-properties.html#static-hasonethroughrelation" class="sidebar-link">static HasOneThroughRelation</a></li></ul></li><li><a href="/objection.js/new-docs/api/model/static-methods.html" class="sidebar-link">Static Methods</a></li><li><a href="/objection.js/new-docs/api/model/instance-methods.html" class="sidebar-link">Instance Methods</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="static-properties"><a href="#static-properties" aria-hidden="true" class="header-anchor">#</a> Static Properties</h1> <h2 id="static-tablename"><a href="#static-tablename" aria-hidden="true" class="header-anchor">#</a> <code>static</code> tableName</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">tableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'persons'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Name of the database table for this model.</p> <p>Each model must set this.</p> <h2 id="static-relationmappings"><a href="#static-relationmappings" aria-hidden="true" class="header-anchor">#</a> <code>static</code> relationMappings</h2> <p>This property defines the relations to other models.</p> <p>relationMappings is an object (or a function that returns an object) whose keys are relation names and values are <a href="/objection.js/new-docs/api/types/#type-relationmapping">RelationMapping</a> instances. The <code>join</code> property in addition to the relation type define how the models are related to one another. The <code>from</code> and <code>to</code> properties of the <code>join</code> object define the database columns through which the models are associated. Note that neither of these columns need to be primary keys. They can be any columns. In fact they can even be fields inside JSON columns (using the <a href="/objection.js/new-docs/api/objection/#ref">ref</a> helper). In the case of ManyToManyRelation also the join table needs to be defined. This is done using the <code>through</code> object.</p> <p>The <code>modelClass</code> passed to the relation mappings is the class of the related model. It can be one of the following:</p> <ol><li>A model class constructor</li> <li>An absolute path to a module that exports a model class</li> <li>A path relative to one of the paths in <a href="/objection.js/new-docs/api/model/static-properties.html#static-modelpaths">modelPaths</a> array.</li></ol> <p>The file path versions are handy for avoiding require loops.</p> <p>Further reading:</p> <ul><li><a href="/objection.js/new-docs/guide/relations.html">the relation guide</a></li> <li><a href="/objection.js/new-docs/api/types/#type-relationmapping">RelationMapping</a></li></ul> <h5 id="examples"><a href="#examples" aria-hidden="true" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">tableName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'persons'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relationMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      pets<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        relation<span class="token punctuation">:</span> Model<span class="token punctuation">.</span>HasManyRelation<span class="token punctuation">,</span>
        modelClass<span class="token punctuation">:</span> Animal<span class="token punctuation">,</span>
        join<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'persons.id'</span><span class="token punctuation">,</span>
          <span class="token comment">// Any of the `to` and `from` fields can also be</span>
          <span class="token comment">// references to nested fields (or arrays of references).</span>
          <span class="token comment">// Here the relation is created between `persons.id` and</span>
          <span class="token comment">// `animals.json.details.ownerId` properties. The reference</span>
          <span class="token comment">// must be casted to the same type as the other key.</span>
          to<span class="token punctuation">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'animals.json:details.ownerId'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">castInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      father<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        relation<span class="token punctuation">:</span> Model<span class="token punctuation">.</span>BelongsToOneRelation<span class="token punctuation">,</span>
        modelClass<span class="token punctuation">:</span> Person<span class="token punctuation">,</span>
        join<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'persons.fatherId'</span><span class="token punctuation">,</span>
          to<span class="token punctuation">:</span> <span class="token string">'persons.id'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      movies<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        relation<span class="token punctuation">:</span> Model<span class="token punctuation">.</span>ManyToManyRelation<span class="token punctuation">,</span>
        modelClass<span class="token punctuation">:</span> Movie<span class="token punctuation">,</span>
        join<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'persons.id'</span><span class="token punctuation">,</span>
          through<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'persons_movies.actorId'</span><span class="token punctuation">,</span>
            to<span class="token punctuation">:</span> <span class="token string">'persons_movies.movieId'</span>

            <span class="token comment">// If you have a model class for the join table</span>
            <span class="token comment">// you can specify it like this:</span>
            <span class="token comment">//</span>
            <span class="token comment">// modelClass: PersonMovie,</span>

            <span class="token comment">// Columns listed here are automatically joined</span>
            <span class="token comment">// to the related models on read and written to</span>
            <span class="token comment">// the join table instead of the related table</span>
            <span class="token comment">// on insert.</span>
            <span class="token comment">//</span>
            <span class="token comment">// extra: ['someExtra']</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          to<span class="token punctuation">:</span> <span class="token string">'movies.id'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="static-idcolumn"><a href="#static-idcolumn" aria-hidden="true" class="header-anchor">#</a> <code>static</code> idColumn</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">idColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'some_column_name'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Name of the primary key column in the database table.</p> <p>Composite id can be specified by giving an array of column names.</p> <p>Defaults to 'id'.</p> <h2 id="static-jsonschema"><a href="#static-jsonschema" aria-hidden="true" class="header-anchor">#</a> <code>static</code> jsonSchema</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">jsonSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
      required<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'integer'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        name<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> minLength<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> maxLength<span class="token punctuation">:</span> <span class="token number">255</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        age<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'number'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The optional schema against which the model is validated.</p> <p>Must follow <a href="http://json-schema.org" target="_blank" rel="noopener noreferrer">JSON Schema<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> specification. If null no validation is done.</p> <h5 id="read-more"><a href="#read-more" aria-hidden="true" class="header-anchor">#</a> Read more</h5> <ul><li><a href="/objection.js/new-docs/api/model/instance-methods.html#validate">$validate</a></li> <li><a href="/objection.js/new-docs/api/model/static-properties.html#static-jsonattributes">jsonAttributes</a></li> <li><a href="/objection.js/new-docs/recipes/custom-validation.html">custom validation recipe</a></li></ul> <h5 id="examples-2"><a href="#examples-2" aria-hidden="true" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">jsonSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
      required<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'firstName'</span><span class="token punctuation">,</span> <span class="token string">'lastName'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

      properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        id<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'integer'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        parentId<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'integer'</span><span class="token punctuation">,</span> <span class="token string">'null'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        firstName<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> minLength<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> maxLength<span class="token punctuation">:</span> <span class="token number">255</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        lastName<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> minLength<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> maxLength<span class="token punctuation">:</span> <span class="token number">255</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        age<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'number'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">// Properties defined as objects or arrays are</span>
        <span class="token comment">// automatically converted to JSON strings when</span>
        <span class="token comment">// writing to database and back to objects and arrays</span>
        <span class="token comment">// when reading from database. To override this</span>
        <span class="token comment">// behaviour, you can override the</span>
        <span class="token comment">// Person.jsonAttributes property.</span>
        address<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          type<span class="token punctuation">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
          properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            street<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            city<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            zipCode<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="static-virtualattributes"><a href="#static-virtualattributes" aria-hidden="true" class="header-anchor">#</a> <code>static</code> virtualAttributes</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">virtualAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'fullName'</span><span class="token punctuation">,</span> <span class="token string">'isFemale'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">isFemale</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">===</span> <span class="token string">'female'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Getters and methods listed here are serialized with real properties when <a href="/objection.js/new-docs/api/model/instance-methods.html#tojson">toJSON</a> is called. Virtual attribute methods and getters must be synchronous.</p> <p>The virtual values are not written to database. Only the &quot;external&quot; JSON format will contain them.</p> <h5 id="examples-3"><a href="#examples-3" aria-hidden="true" class="header-anchor">#</a> Examples</h5> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">virtualAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'fullName'</span><span class="token punctuation">,</span> <span class="token string">'isFemale'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">get</span> <span class="token function">isFemale</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>gender <span class="token operator">===</span> <span class="token string">'female'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> Person<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  firstName<span class="token punctuation">:</span> <span class="token string">'Jennifer'</span><span class="token punctuation">,</span>
  lastName<span class="token punctuation">:</span> <span class="token string">'Aniston'</span><span class="token punctuation">,</span>
  gender<span class="token punctuation">:</span> <span class="token string">'female'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Note that `toJSON` is always called automatically</span>
<span class="token comment">// when an object is serialized to a JSON string using</span>
<span class="token comment">// JSON.stringify. You very rarely need to call `toJSON`</span>
<span class="token comment">// explicitly. koa, express and all other frameworks I'm</span>
<span class="token comment">// aware of use JSON.stringify to serialize objects to JSON.</span>
<span class="token keyword">const</span> pojo <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pojo<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span> <span class="token comment">// --&gt; 'Jennifer Aniston'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pojo<span class="token punctuation">.</span>isFemale<span class="token punctuation">)</span> <span class="token comment">// --&gt; true</span>
</code></pre></div><p>You can also pass options to <a href="/objection.js/new-docs/api/model/instance-methods.html#tojson">toJSON</a> to only serialize a subset of virtual attributes. In fact, when the <code>virtuals</code> option is used, the attributes don't even need to be listed in <code>virtualAttributes</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> pojo <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">{</span> virtuals<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'fullName'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="static-modifiers"><a href="#static-modifiers" aria-hidden="true" class="header-anchor">#</a> <code>static</code> modifiers</h2> <p>Reusable query building functions that can be used in any <a href="/objection.js/new-docs/api/query-builder/instance-methods.html#eager">eager query</a>, using <a href="/objection.js/new-docs/api/query-builder/instance-methods.html#modify">modify</a> method and in many other places.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Movie</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">modifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">goodMovies</span><span class="token punctuation">(</span><span class="token parameter">builder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'stars'</span><span class="token punctuation">,</span> <span class="token string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">orderByName</span><span class="token punctuation">(</span><span class="token parameter">builder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">modifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">dogs</span><span class="token punctuation">(</span><span class="token parameter">builder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'species'</span><span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Modifiers can be used in any eager query:</p> <div class="language-js extra-class"><pre class="language-js"><code>Person
  <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">eager</span><span class="token punctuation">(</span><span class="token string">'[movies(goodMovies, orderByName).actors, pets(dogs)]'</span><span class="token punctuation">)</span>
</code></pre></div><p>Modifiers can also be used through <a href="/objection.js/new-docs/api/query-builder/instance-methods.html#modifyeager">modifyEager</a>:</p> <div class="language-js extra-class"><pre class="language-js"><code>Person
  <span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">eager</span><span class="token punctuation">(</span><span class="token string">'[movies.actors, pets]'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">modifyEager</span><span class="token punctuation">(</span><span class="token string">'movies'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'goodMovies'</span><span class="token punctuation">,</span> <span class="token string">'orderByName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">modifyEager</span><span class="token punctuation">(</span><span class="token string">'pets'</span><span class="token punctuation">,</span> <span class="token string">'dogs'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="static-namedfilters"><a href="#static-namedfilters" aria-hidden="true" class="header-anchor">#</a> <code>static</code> namedFilters</h2> <p>An alias for <a href="#static-modifiers">modifiers</a></p> <h2 id="static-modelpaths"><a href="#static-modelpaths" aria-hidden="true" class="header-anchor">#</a> <code>static</code> modelPaths</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">modelPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>__dirname<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>A list of paths from which to search for models for relations.</p> <p>A model class can be defined for a relation in <a href="/objection.js/new-docs/api/model/static-properties.html#static-relationmappings">relationMappings</a> as</p> <ol><li>A model class constructor</li> <li>An absolute path to a module that exports a model class</li> <li>A path relative to one of the paths in <code>modelPaths</code> array.</li></ol> <p>You probably don't want to define <code>modelPaths</code> property for each model. Once again we
recommend that you create a <code>BaseModel</code> super class for all your models and define
shared configuration such as this there.</p> <h5 id="examples-4"><a href="#examples-4" aria-hidden="true" class="header-anchor">#</a> Examples</h5> <p>Using a shared <code>BaseModel</code> superclass:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// models/BaseModel.js</span>
<span class="token keyword">class</span> <span class="token class-name">BaseModel</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">modelPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>__dirname<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  BaseModel
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// models/Person.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> BaseModel <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./BaseModel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">BaseModel</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="static-concurrency"><a href="#static-concurrency" aria-hidden="true" class="header-anchor">#</a> <code>static</code> concurrency</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">concurrency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>How many queries can be run concurrently per connection.</p> <p>This doesn't limit the concurrencly of the entire server. It only limits the number of concurrent queries that can be run on a single connection. By default knex connection pool size is 10, which means that the maximum number of concurrent queries started by objection is <code>Model.concurrency * 10</code>. You can also easily increase the knex pool size.</p> <p>The default concurrency is 4 except for mssql, for which the default is 1. The mssql default is needed because of the buggy driver that only allows one query at a time per connection.</p> <h2 id="static-jsonattributes"><a href="#static-jsonattributes" aria-hidden="true" class="header-anchor">#</a> <code>static</code> jsonAttributes</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">jsonAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'someProp'</span><span class="token punctuation">,</span> <span class="token string">'someOtherProp'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Properties that should be saved to database as JSON strings.</p> <p>The properties listed here are serialized to JSON strings upon insertion/update to the database and parsed back to objects when models are read from the database. Combined with the postgresql's json or jsonb data type, this is a powerful way of representing documents as single database rows.</p> <p>If this property is left unset all properties declared as objects or arrays in the <a href="/objection.js/new-docs/api/model/static-properties.html#static-jsonschema">jsonSchema</a> are implicitly added to this list.</p> <h2 id="static-cloneobjectattributes"><a href="#static-cloneobjectattributes" aria-hidden="true" class="header-anchor">#</a> <code>static</code> cloneObjectAttributes</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">cloneObjectAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If true (the default) object attributes (for example jsonb columns) are cloned when <code>$toDatabaseJson</code>, <code>$toJson</code> or <code>toJSON</code> is called. If this is set to false, they are not cloned. Note that nested <code>Model</code> instances inside relations etc. are still effectively cloned, because <code>$toJson</code> is called for them recursively, but their jsonb columns, again,
are not 😃</p> <p>Usually you don't need to care about this setting, but if you have large object fields (for example large objects in jsonb columns) cloning the data can become slow and play a significant part in your server's performance. There's rarely a need to to clone this data, but since it has historically been copied, we cannot change the default behaviour
easily.</p> <p>TLDR; Set this setting to <code>false</code> if you have large jsonb columns and you see that cloning that data takes a significant amount of time <strong>when you profile the code</strong>.</p> <h2 id="static-columnnamemappers"><a href="#static-columnnamemappers" aria-hidden="true" class="header-anchor">#</a> <code>static</code> columnNameMappers</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model<span class="token punctuation">,</span> snakeCaseMappers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">columnNameMappers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">snakeCaseMappers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The mappers to use to convert column names to property names in code.</p> <p>Further reading:</p> <ul><li><a href="/objection.js/new-docs/api/objection/#snakecasemappers">snakeCaseMappers</a></li> <li><a href="/objection.js/new-docs/recipes/snake-case-to-camel-case-conversion.html">snake_case to camelCase conversion recipe</a></li></ul> <h5 id="examples-5"><a href="#examples-5" aria-hidden="true" class="header-anchor">#</a> Examples</h5> <p>If your columns are UPPER_SNAKE_CASE:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Model<span class="token punctuation">,</span> snakeCaseMappers <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'objection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">columnNameMappers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">snakeCaseMappers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> upperCase<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The mapper signature:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> columnNameMappers <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">parse</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// database --&gt; code</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">format</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// code --&gt; database</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="static-relatedfindquerymutates"><a href="#static-relatedfindquerymutates" aria-hidden="true" class="header-anchor">#</a> <code>static</code> relatedFindQueryMutates</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relatedFindQueryMutates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If this config is set to false, calling <code>foo.$relatedQuery('bar')</code> doesn't assign the fetched related models to <code>foo.bar</code>. The default is true.</p> <h2 id="static-relatedinsertquerymutates"><a href="#static-relatedinsertquerymutates" aria-hidden="true" class="header-anchor">#</a> <code>static</code> relatedInsertQueryMutates</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relatedInsertQueryMutates</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If this config is set to false, calling <code>foo.$relatedQuery('bar').insert(obj)</code> doesn't append the inserted related model to <code>foo.bar</code>. The default is true.</p> <h2 id="static-uidprop"><a href="#static-uidprop" aria-hidden="true" class="header-anchor">#</a> <code>static</code> uidProp</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">uidProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'#id'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Name of the property used to store a temporary non-db identifier for the model.</p> <p>NOTE: You cannot use any of the model's properties as <code>uidProp</code>. For example if your model has a property <code>id</code>, you cannot set <code>uidProp = 'id'</code>.</p> <p>Defaults to '#id'.</p> <h2 id="static-uidrefprop"><a href="#static-uidrefprop" aria-hidden="true" class="header-anchor">#</a> <code>static</code> uidRefProp</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">uidRefProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'#ref'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Name of the property used to store a reference to a <a href="/objection.js/new-docs/api/model/static-properties.html#static-uidprop">uidProp</a></p> <p>NOTE: You cannot use any of the model's properties as <code>uidRefProp</code>. For example if your model has a property <code>ref</code>, you cannot set <code>uidRefProp = 'ref'</code>.</p> <p>Defaults to <code>'#ref'</code>.</p> <h2 id="static-dbrefprop"><a href="#static-dbrefprop" aria-hidden="true" class="header-anchor">#</a> <code>static</code> dbRefProp</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">dbRefProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'#dbRef'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Name of the property used to point to an existing database row from an <code>insertGraph</code> graph.</p> <p>NOTE: You cannot use any of the model's properties as <code>dbRefProp</code>. For example if your model has a property <code>id</code>, you cannot set <code>dbRefProp = 'id'</code>.</p> <p>Defaults to '#dbRef'.</p> <h2 id="static-proprefregex"><a href="#static-proprefregex" aria-hidden="true" class="header-anchor">#</a> <code>static</code> propRefRegex</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">propRefRegex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">/</span>#ref<span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span>\<span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">^</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">/</span>g<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Regular expression for parsing a reference to a property.</p> <p>Defaults to <code>/#ref{([^\.]+)\.([^}]+)}/g</code>.</p> <h2 id="static-pickjsonschemaproperties"><a href="#static-pickjsonschemaproperties" aria-hidden="true" class="header-anchor">#</a> <code>static</code> pickJsonSchemaProperties</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">pickJsonSchemaProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If this is true only properties in <code>jsonSchema</code> are picked when inserting or updating a row in the database.</p> <p>Defaults to false.</p> <h2 id="static-defaulteageralgorithm"><a href="#static-defaulteageralgorithm" aria-hidden="true" class="header-anchor">#</a> <code>static</code> defaultEagerAlgorithm</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">defaultEagerAlgorithm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Model<span class="token punctuation">.</span>WhereInEagerAlgorithm<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Sets the default eager loading algorithm for this model. Must be either
<code>Model.WhereInEagerAlgorithm</code> or <code>Model.JoinEagerAlgorithm</code>.</p> <p>Defaults to <code>Model.WhereInEagerAlgorithm</code>.</p> <h2 id="static-defaulteageroptions"><a href="#static-defaulteageroptions" aria-hidden="true" class="header-anchor">#</a> <code>static</code> defaultEagerOptions</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">defaultEagerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      minimize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      separator<span class="token punctuation">:</span> <span class="token string">'-&gt;'</span><span class="token punctuation">,</span>
      aliases<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Sets the default options for eager loading algorithm. See the possible
fields <a href="/objection.js/new-docs/api/types/#type-eageroptions">here</a>.</p> <p>Defaults to <code>{minimize: false, separator: ':', aliases: {}}</code>.</p> <h2 id="static-uselimitinfirst"><a href="#static-uselimitinfirst" aria-hidden="true" class="header-anchor">#</a> <code>static</code> useLimitInFirst</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">useLimitInFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If true, <code>limit(1)</code> is added to the query when <a href="/api/query-builder/instance-methods#first">first()</a> is called. Defaults to <code>false</code> for legacy reasons.</p> <h2 id="static-querybuilder"><a href="#static-querybuilder" aria-hidden="true" class="header-anchor">#</a> <code>static</code> QueryBuilder</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">QueryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> MyCustomQueryBuilder<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="/objection.js/new-docs/api/query-builder/">QueryBuilder</a> subclass to use for all queries created for this model.</p> <p>This constructor is used whenever a query builder is created using <a href="/objection.js/new-docs/api/model/static-methods.html#static-query">query</a>, <a href="/objection.js/new-docs/api/model/instance-methods.html#query">$query</a>, <a href="/objection.js/new-docs/api/model/instance-methods.html#relatedquery">$relatedQuery</a> or any other method that creates a query. You can override this to use your own <a href="/objection.js/new-docs/api/query-builder/">QueryBuilder</a> subclass.</p> <p><a href="/objection.js/new-docs/recipes/custom-query-builder.html">Usage example</a>.</p> <h2 id="static-belongstoonerelation"><a href="#static-belongstoonerelation" aria-hidden="true" class="header-anchor">#</a> <code>static</code> BelongsToOneRelation</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relationMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    parent<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      relation<span class="token punctuation">:</span> Model<span class="token punctuation">.</span>BelongsToOneRelation<span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>A relation type that can be used in <a href="/objection.js/new-docs/api/model/static-properties.html#static-relationmappings">relationMappings</a> to create a belongs-to-one relationship. See <a href="/objection.js/new-docs/guide/relations.html">this section</a> for more information about different relation types.</p> <h2 id="static-hasonerelation"><a href="#static-hasonerelation" aria-hidden="true" class="header-anchor">#</a> <code>static</code> HasOneRelation</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relationMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    parent<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      relation<span class="token punctuation">:</span> Model<span class="token punctuation">.</span>HasOneRelation<span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>A relation type that can be used in <a href="/objection.js/new-docs/api/model/static-properties.html#static-relationmappings">relationMappings</a> to create a has-one relationship. See <a href="/objection.js/new-docs/guide/relations.html">this section</a> for more information about different relation types.</p> <h2 id="static-hasmanyrelation"><a href="#static-hasmanyrelation" aria-hidden="true" class="header-anchor">#</a> <code>static</code> HasManyRelation</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relationMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pets<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      relation<span class="token punctuation">:</span> Model<span class="token punctuation">.</span>HasManyRelation<span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>A relation type that can be used in <a href="/objection.js/new-docs/api/model/static-properties.html#static-relationmappings">relationMappings</a> to create a has-may relationship. See <a href="/objection.js/new-docs/guide/relations.html">this section</a> for more information about different relation types.</p> <h2 id="static-manytomanyrelation"><a href="#static-manytomanyrelation" aria-hidden="true" class="header-anchor">#</a> <code>static</code> ManyToManyRelation</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relationMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    movies<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      relation<span class="token punctuation">:</span> Model<span class="token punctuation">.</span>ManyToManyRelation<span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>A relation type that can be used in <a href="/objection.js/new-docs/api/model/static-properties.html#static-relationmappings">relationMappings</a> to create a many-to-many relationship. See <a href="/objection.js/new-docs/guide/relations.html">this section</a> for more information about different relation types.</p> <h2 id="static-hasonethroughrelation"><a href="#static-hasonethroughrelation" aria-hidden="true" class="header-anchor">#</a> <code>static</code> HasOneThroughRelation</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token keyword">get</span> <span class="token function">relationMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    favoriteMovie<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      relation<span class="token punctuation">:</span> Model<span class="token punctuation">.</span>HasOneThroughRelation<span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>A relation type that can be used in <a href="/objection.js/new-docs/api/model/static-properties.html#static-relationmappings">relationMappings</a> to create a has-one-through relationship. See <a href="/objection.js/new-docs/guide/relations.html">this section</a> for more information about different relation types.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/objection.js/new-docs/api/model/overview.html" class="prev">
          Overview
        </a></span> <span class="next"><a href="/objection.js/new-docs/api/model/static-methods.html">
          Static Methods
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/objection.js/new-docs/assets/js/app.4e2e77f5.js" defer></script><script src="/objection.js/new-docs/assets/js/11.cf2c8918.js" defer></script>
  </body>
</html>
